<!DOCTYPE HTML>
<html>
<head>
    <title>American Rotation Score Board</title>
    <style>
        body {
            border: 0;
            margin: 0px;
            padding: 0px;
            background-color: black;
            overflow: hidden;
        }
    </style>
</head>
<body
    onresize="OnResize()"
    >

    <canvas id="myCanvas"></canvas>
    <script>
        var canvas = document.getElementById('myCanvas');
        canvas.addEventListener("mousedown", OnMouseDown, false);

        var context = canvas.getContext('2d');

        var Controls = [
            new Box(50, 10, 200, 100),
            new Ball(50, 50, 45, 7),
            new Ball(80, 90, 40, 14),
        ];

        Draw();

        var RackStatus = Array(15);
        
        function Box(x, y, width, height) {
            this.x = x;
            this.y = y;
            this.w = width;
            this.h = height;

            this.IsHit = function (x, y) {
                if (x < this.x) return false;
                if (y < this.y) return false;
                if (x - this.x > width) return false;
                if (y - this.y > width) return false;
                return true;
            };

            this.OnHit = function (x, y) {
                alert("hit box. coordinate inside box = (" + (x - this.x) + ", " + (y - this.y) + ")");
            }

            this.Draw = function () {
                context.strokeStyle = "white";
                context.strokeRect(this.x, this.y, this.w, this.h);
            }
        }

        function Ball(x, y, radius, ballNumber) {
            this.x = x;
            this.y = y;
            this.r = radius;
            this.number = ballNumber;

            this.white2 = '#F2F2F2';
            this.BallColors = [
            "gray", // 0
            "#FFD700", // 1, gold
            "blue", // 2
            "red", // 3
            "purple", // 4
            "#FF8C00", // 5, dark orange
            "green", // 6
            "maroon", // 7
            "#292929", // 8, almost black
            ];

            this.IsHit = function (x, y) {
                return this.r * this.r > (this.x - x) * (this.x - x) + (this.y - y) * (this.y - y)
            };

            this.OnHit = function (x, y) {
                var dist = Math.sqrt((this.x - x) * (this.x - x) + (this.y - y) * (this.y - y));
                alert("hit ball number " + this.number + ", dist to center = " + dist);
            }

            this.Draw = function () {
                if (this.number < 9) this.DrawSolid();
                else this.DrawStripe();
            }

            this.DrawSolid = function () {
                DrawCircle(context, this.x, this.y, this.r, this.BallColors[this.number]);
                DrawCircle(context, this.x, this.y, this.r / 3.25, this.white2);
                DrawCenterText(context, this.number, this.r / 1.75, this.x, this.y);
            }

            this.DrawStripe = function() {
                DrawCircle(context, this.x, this.y, this.r, this.BallColors[this.number - 8]);
                DrawPie(context, this.x, this.y, this.r, this.white2, -5 / 6 * Math.PI, -1 / 6 * Math.PI);
                DrawPie(context, this.x, this.y, this.r, this.white2, +1 / 6 * Math.PI, +5 / 6 * Math.PI);
                DrawCircle(context, this.x, this.y, this.r / 2.75, this.white2);
                DrawCenterText(context, this.number, this.r / 1.75, this.x, this.y);
            }
        }

        function Draw() {
            for (var i = 0; i < Controls.length; ++i) {
                Controls[i].Draw();
            }
        }

        function DrawBallsInBox() {
            var ballsPerRow = Math.ceil(Math.random() * 15);
            var numRows = Math.ceil(15 / ballsPerRow);
            var radius = Math.min(
                            canvas.height / numRows / 2,
                            canvas.width / ballsPerRow / 2);
            var areaWidth = radius * ballsPerRow * 2;
            var areaHeight = radius * numRows * 2;

            for (i = 0; i < 15; i++) {
                var rowIdx = Math.floor(i / ballsPerRow);
                var colIdx = i % ballsPerRow;
                var centerX = (1 + 2 * colIdx) / (ballsPerRow * 2) * areaWidth;
                var centerY = (1 + 2 * rowIdx) / (numRows * 2) * areaHeight;
                DrawBall(context, centerX, centerY, radius, i + 1);
            }
        }

        function DrawCenterText(context, text, fontSize, centerX, centerY) {
            context.fillStyle = "black";
            context.font = "Bold " + fontSize + 'px Consolas';
            context.textAlign = 'center';
            context.textBaseline = 'middle';
            context.fillText(text, centerX, centerY);
        }

        function DrawCircle(context, centerX, centerY, radius, color) {
            DrawPie(context, centerX, centerY, radius, color, 0, 2 * Math.PI);
        }

        function DrawPie(context, centerX, centerY, radius, color, startRad, endRad) {
            context.beginPath();
            context.arc(centerX, centerY, radius, startRad, endRad);
            context.fillStyle = color;
            context.fill();
        }

        function OnMouseDown(event) {
            x = event.pageX;
            y = event.pageY;

            alert("mouse clict at (" + x + ", " + y + ")");
            for (var i = 0; i < Controls.length; ++i) {
                if (Controls[i].IsHit(x, y))
                    Controls[i].OnHit(x, y);
            }
        }

        function OnResize() {
            canvas = document.getElementById("myCanvas");
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            Draw();
        }
    </script>
</body>
</html>
